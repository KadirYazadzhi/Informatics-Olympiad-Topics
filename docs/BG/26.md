# üå≥ –°—Ç—Ä—É–∫—Ç—É—Ä–∏ –æ—Ç —Ç–∏–ø –î—ä—Ä–≤–æ (Tree Structures)

–î—ä—Ä–≤–æ—Ç–æ –µ —Å–≤—ä—Ä–∑–∞–Ω –≥—Ä–∞—Ñ –±–µ–∑ —Ü–∏–∫–ª–∏. –¢–æ –µ –µ–¥–Ω–∞ –æ—Ç –Ω–∞–π-–≤–∞–∂–Ω–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞—Ç–∞ –∑–∞—Ä–∞–¥–∏ —Å–≤–æ—è—Ç–∞ –π–µ—Ä–∞—Ä—Ö–∏—á–Ω–∞ –ø—Ä–∏—Ä–æ–¥–∞.

---

## 1. –û—Å–Ω–æ–≤–Ω–∏ –ø–æ–Ω—è—Ç–∏—è

*   **–ö–æ—Ä–µ–Ω (Root)**: –í—Ä—ä—Ö, –æ—Ç –∫–æ–π—Ç–æ –∑–∞–ø–æ—á–≤–∞ –π–µ—Ä–∞—Ä—Ö–∏—è—Ç–∞.
*   **–õ–∏—Å—Ç–æ (Leaf)**: –í—Ä—ä—Ö –±–µ–∑ –¥–µ—Ü–∞.
*   **–í–∏—Å–æ—á–∏–Ω–∞**: –ú–∞–∫—Å–∏–º–∞–ª–Ω–æ—Ç–æ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –∫–æ—Ä–µ–Ω–∞ –¥–æ –ª–∏—Å—Ç–æ.
*   **–î–≤–æ–∏—á–Ω–æ –¥—ä—Ä–≤–æ**: –í—Å–µ–∫–∏ –≤—Ä—ä—Ö –∏–º–∞ –Ω–∞–π-–º–Ω–æ–≥–æ 2 –¥–µ—Ü–∞.

---

## 2. –û–±—Ö–æ–∂–¥–∞–Ω–µ –Ω–∞ –¥—ä—Ä–≤–µ—Ç–∞

1.  **Pre-order**: –ö–æ—Ä–µ–Ω $\to$ –õ—è–≤–æ $\to$ –î—è—Å–Ω–æ.
2.  **In-order**: –õ—è–≤–æ $\to$ –ö–æ—Ä–µ–Ω $\to$ –î—è—Å–Ω–æ (–¥–∞–≤–∞ —Å–æ—Ä—Ç–∏—Ä–∞–Ω–∞ —Ä–µ–¥–∏—Ü–∞ –ø—Ä–∏ BST).
3.  **Post-order**: –õ—è–≤–æ $\to$ –î—è—Å–Ω–æ $\to$ –ö–æ—Ä–µ–Ω.

---

## 3. –ù–∞–π-–±–ª–∏–∑—ä–∫ –æ–±—â –ø—Ä–∞—Ä–æ–¥–∏—Ç–µ–ª (LCA)

LCA –Ω–∞ –≤—ä—Ä—Ö–æ–≤–µ—Ç–µ $u$ –∏ $v$ –µ –Ω–∞–π-–¥—ä–ª–±–æ–∫–∏—è—Ç –≤—Ä—ä—Ö, –∫–æ–π—Ç–æ –µ –ø—Ä–∞—Ä–æ–¥–∏—Ç–µ–ª –∏ –Ω–∞ –¥–≤–∞—Ç–∞.

### 3.1. –î–≤–æ–∏—á–Ω–æ –ø–æ–≤–¥–∏–≥–∞–Ω–µ (Binary Lifting)
–ü–æ–∑–≤–æ–ª—è–≤–∞ –Ω–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ LCA –∑–∞ $O(\log N)$ —Å–ª–µ–¥ $O(N \log N)$ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å–∏–Ω–≥.
*   `up[u][i]` –µ –ø—Ä–∞—Ä–æ–¥–∏—Ç–µ–ª—è—Ç –Ω–∞ $u$ –Ω–∞ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ $2^i$.
*   `up[u][i] = up[up[u][i-1]][i-1]`.

```cpp
int up[MAXN][LOGN];
int tin[MAXN], tout[MAXN], timer;

void dfs(int u, int p) {
    tin[u] = ++timer;
    up[u][0] = p;
    for (int i = 1; i < LOGN; i++)
        up[u][i] = up[up[u][i-1]][i-1];
    for (int v : adj[u])
        if (v != p) dfs(v, u);
    tout[u] = ++timer;
}

bool is_ancestor(int u, int v) {
    return tin[u] <= tin[v] && tout[u] >= tout[v];
}

int lca(int u, int v) {
    if (is_ancestor(u, v)) return u;
    if (is_ancestor(v, u)) return v;
    for (int i = LOGN - 1; i >= 0; i--)
        if (!is_ancestor(up[u][i], v))
            u = up[u][i];
    return up[u][0];
}
```

---

## 4. –î–∏–∞–º–µ—Ç—ä—Ä –Ω–∞ –¥—ä—Ä–≤–æ

–ù–∞–π-–¥—ä–ª–≥–∏—è—Ç –ø—ä—Ç –º–µ–∂–¥—É –¥–≤–∞ –≤—ä—Ä—Ö–∞ –≤ –¥—ä—Ä–≤–æ—Ç–æ.
**–ê–ª–≥–æ—Ä–∏—Ç—ä–º —Å –¥–≤–µ DFS**:
1.  –ü—É—Å–∫–∞–º–µ DFS –æ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª–µ–Ω –≤—Ä—ä—Ö $X$, –∑–∞ –¥–∞ –Ω–∞–º–µ—Ä–∏–º –Ω–∞–π-–¥–∞–ª–µ—á–Ω–∏—è –≤—Ä—ä—Ö $Y$.
2.  –ü—É—Å–∫–∞–º–µ –≤—Ç–æ—Ä–∏ DFS –æ—Ç $Y$, –∑–∞ –¥–∞ –Ω–∞–º–µ—Ä–∏–º –Ω–∞–π-–¥–∞–ª–µ—á–Ω–∏—è –æ—Ç –Ω–µ–≥–æ –≤—Ä—ä—Ö $Z$.
3.  –†–∞–∑—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –º–µ–∂–¥—É $Y$ –∏ $Z$ –µ –¥–∏–∞–º–µ—Ç—ä—Ä—ä—Ç.

---

## 5. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –¥—ä—Ä–≤–µ—Ç–∞

### 5.1. –î–≤–æ–∏—á–Ω–æ –¥—ä—Ä–≤–æ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ (BST)
–ü–æ–¥–¥—ä—Ä–∂–∞ –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ —Å–æ—Ä—Ç–∏—Ä–∞–Ω–∏. –í—Å—è–∫–æ –ª—è–≤–æ –¥–µ—Ç–µ –µ –ø–æ-–º–∞–ª–∫–æ –æ—Ç –∫–æ—Ä–µ–Ω–∞, –∞ –≤—Å—è–∫–æ –¥—è—Å–Ω–æ ‚Äì –ø–æ-–≥–æ–ª—è–º–æ.

### 5.2. Fenwick –∏ Segment Trees
(–í–∏–∂ –¢–µ–º–∞ 34).

---

## 6. –ó–∞–¥–∞—á–∏ –∑–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
1.  **CSES Tree Diameter**: –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∏–∞–º–µ—Ç—ä—Ä–∞.
2.  **CSES Company Queries II**: –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ LCA.
3.  **Codeforces 191C**: Fools and Roads (LCA + Difference Array –≤—ä—Ä—Ö—É –¥—ä—Ä–≤–æ).
4.  **UVa 112**: Tree Summing.

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–î—ä—Ä–≤–µ—Ç–∞—Ç–∞ –ø–æ–∑–≤–æ–ª—è–≤–∞—Ç –º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–∞ –±—ä–¥–∞—Ç –∏–∑–ø—ä–ª–Ω–µ–Ω–∏ –∑–∞ –ª–æ–≥–∞—Ä–∏—Ç–º–∏—á–Ω–æ –≤—Ä–µ–º–µ. –†–∞–∑–±–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ LCA –∏ –¥–∏–Ω–∞–º–∏—á–Ω–æ—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ –≤—ä—Ä—Ö—É –¥—ä—Ä–≤–µ—Ç–∞ (Topic 35) –µ –∫—Ä–∏—Ç–∏—á–Ω–æ –∑–∞ –Ω–∞–ø—Ä–µ–¥–Ω–∞–ª–∏ —Å—ä—Å—Ç–µ–∑–∞—Ç–µ–ª–∏.
