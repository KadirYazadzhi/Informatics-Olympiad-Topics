# üéÆ –¢–µ–æ—Ä–∏—è –Ω–∞ –∏–≥—Ä–∏—Ç–µ: –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –ê–Ω–∞–ª–∏–∑

## ‚ôüÔ∏è –ö–ª–∞—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –∏–≥—Ä–∏—Ç–µ

–í —Å—ä—Å—Ç–µ–∑–∞—Ç–µ–ª–Ω–æ—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ —Ä–∞–∑–≥–ª–µ–∂–¥–∞–º–µ **–±–µ–∑–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–∏ –∏–≥—Ä–∏** (impartial games) –∏ **–ø–∞—Ä—Ç–∏–∑–∞–Ω—Å–∫–∏ –∏–≥—Ä–∏** (partizan games).
- **–ë–µ–∑–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–∏**: –î–æ–ø—É—Å—Ç–∏–º–∏—Ç–µ —Ö–æ–¥–æ–≤–µ –∑–∞–≤–∏—Å—è—Ç —Å–∞–º–æ –æ—Ç —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ, –Ω–µ –æ—Ç —Ç–æ–≤–∞ –∫–æ–π –µ –Ω–∞ —Ö–æ–¥ (–Ω–∞–ø—Ä. –ù–∏–º).
- **–ü–∞—Ä—Ç–∏–∑–∞–Ω—Å–∫–∏**: –•–æ–¥–æ–≤–µ—Ç–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∏–≥—Ä–∞—á–∞ (–Ω–∞–ø—Ä. –®–∞—Ö - –±–µ–ª–∏—Ç–µ –º–µ—Å—Ç—è—Ç –±–µ–ª–∏ —Ñ–∏–≥—É—Ä–∏).

---

## üîô –†–µ—Ç—Ä–æ–≥—Ä–∞–¥–µ–Ω –∞–Ω–∞–ª–∏–∑ (Retrograde Analysis)

–¢–æ–≤–∞ –µ —Ç–µ—Ö–Ω–∏–∫–∞ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –ø–µ—á–µ–ª–∏–≤—à–∏/–≥—É–±–µ—â–∏ –ø–æ–∑–∏—Ü–∏–∏ —á—Ä–µ–∑ –≤—Ä—ä—â–∞–Ω–µ –æ—Ç –∫—Ä–∞—è –∫—ä–º –Ω–∞—á–∞–ª–æ—Ç–æ. –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –∑–∞ –∏–≥—Ä–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–µ–Ω–∏ –∫–∞—Ç–æ –≥—Ä–∞—Ñ –Ω–∞ —Å—ä—Å—Ç–æ—è–Ω–∏—è—Ç–∞.

1. **–¢–µ—Ä–º–∏–Ω–∞–ª–Ω–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è**: –í—Å–∏—á–∫–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è, –æ—Ç –∫–æ–∏—Ç–æ –Ω—è–º–∞ —Ö–æ–¥–æ–≤–µ, —Å–∞ **–ì—É–±–µ—â–∏** (L).
2. –ê–∫–æ –æ—Ç —Å—ä—Å—Ç–æ—è–Ω–∏–µ $U$ –∏–º–∞ –ø–æ–Ω–µ –µ–¥–∏–Ω —Ö–æ–¥ –∫—ä–º –ì—É–±–µ—â–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ $V$, —Ç–æ $U$ –µ **–ü–µ—á–µ–ª–∏–≤—à–æ** (W).
3. –ê–∫–æ –æ—Ç —Å—ä—Å—Ç–æ—è–Ω–∏–µ $U$ –≤—Å–∏—á–∫–∏ —Ö–æ–¥–æ–≤–µ –≤–æ–¥—è—Ç –∫—ä–º –ü–µ—á–µ–ª–∏–≤—à–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è, —Ç–æ $U$ –µ **–ì—É–±–µ—â–æ** (L).

**–ê–ª–≥–æ—Ä–∏—Ç—ä–º (BFS-–ø–æ–¥–æ–±–µ–Ω)**:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–º–µ `degree[u]` = –±—Ä–æ–π –∏–∑—Ö–æ–¥—è—â–∏ —Ä–µ–±—Ä–∞.
- –í–∫–∞—Ä–≤–∞–º–µ –≤—Å–∏—á–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–Ω–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è –≤ –æ–ø–∞—à–∫–∞.
- –ö–æ–≥–∞—Ç–æ –æ–±—Ä–∞–±–æ—Ç–≤–∞–º–µ —Å—ä—Å—Ç–æ—è–Ω–∏–µ $V$ (—á–∏–π—Ç–æ —Å—Ç–∞—Ç—É—Å –≤–µ—á–µ –∑–Ω–∞–µ–º):
  - –ó–∞ –≤—Å—è–∫–æ $U$, –≤–æ–¥–µ—â–æ –∫—ä–º $V$:
    - –ê–∫–æ $V$ –µ –≥—É–±–µ—â–æ $	o$ $U$ —Å—Ç–∞–≤–∞ –ø–µ—á–µ–ª–∏–≤—à–æ –≤–µ–¥–Ω–∞–≥–∞.
    - –ê–∫–æ $V$ –µ –ø–µ—á–µ–ª–∏–≤—à–æ $	o$ –Ω–∞–º–∞–ª—è–≤–∞–º–µ `degree[U]`. –ê–∫–æ `degree[U]` —Å—Ç–∞–Ω–µ 0, –∑–Ω–∞—á–∏ –≤—Å–∏—á–∫–∏ —Ö–æ–¥–æ–≤–µ –æ—Ç $U$ –≤–æ–¥—è—Ç –∫—ä–º –ø–µ—á–µ–ª–∏–≤—à–∏ $	o$ $U$ —Å—Ç–∞–≤–∞ –≥—É–±–µ—â–æ.

---

## ‚öñÔ∏è –ò–≥—Ä–∞—Ç–∞ –ù–∏–º –∏ XOR —Å—É–º–∏ (–†–∞–∑—à–∏—Ä–µ–Ω–æ)

### –ó–∞—â–æ XOR?
–í—Å—è–∫–æ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–æ —Ü—è–ª–æ —á–∏—Å–ª–æ $n$ –∏–º–∞ —É–Ω–∏–∫–∞–ª–Ω–æ —Ä–∞–∑–ª–∞–≥–∞–Ω–µ –Ω–∞ —Å—É–º–∞ –æ—Ç —Å—Ç–µ–ø–µ–Ω–∏ –Ω–∞ 2. –ò–≥—Ä–∞—Ç–∞ –ù–∏–º –µ –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ –Ω–∞ —Å—É–º–∞ –æ—Ç –Ω—è–∫–æ–ª–∫–æ –∏–≥—Ä–∏ —Å –ø–æ –µ–¥–Ω–∞ –∫—É–ø—á–∏–Ω–∞. –û–ø–µ—Ä–∞—Ü–∏—è—Ç–∞, –∫–æ—è—Ç–æ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∞ –Ω–∞ "—Å—ä–±–∏—Ä–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∏ –±–µ–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ", –µ –ø–æ–±–∏—Ç–æ–≤–æ—Ç–æ —Å—ä–±–∏—Ä–∞–Ω–µ –±–µ–∑ –ø—Ä–µ–Ω–æ—Å (XOR).

### –í–∞—Ä–∏–∞—Ü–∏–∏ –Ω–∞ –ù–∏–º:
1. **Misere Nim**: –ü–µ—á–µ–ª–∏ —Ç–æ–∑–∏, –∫–æ–π—Ç–æ –µ –ø—Ä–∏–Ω—É–¥–µ–Ω –¥–∞ –≤–∑–µ–º–µ –ø–æ—Å–ª–µ–¥–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç (–≥—É–±–∏ —Ç–æ–∑–∏, –∫–æ–π—Ç–æ –≤–∑–µ–º–µ –ø–æ—Å–ª–µ–¥–Ω–∏—è).
   - –°—Ç—Ä–∞—Ç–µ–≥–∏—è: –°—ä—â–∞—Ç–∞ –∫–∞—Ç–æ –Ω–æ—Ä–º–∞–ª–Ω–∞—Ç–∞ –∏–≥—Ä–∞, –æ—Å–≤–µ–Ω –∞–∫–æ –≤—Å–∏—á–∫–∏ –∫—É–ø—á–∏–Ω–∏ —Å–∞ —Å —Ä–∞–∑–º–µ—Ä 1. –¢–æ–≥–∞–≤–∞ –ø–µ—á–µ–ª–∏–≤—à–∏—è—Ç —Ö–æ–¥ –µ –¥–∞ –æ—Å—Ç–∞–≤–∏–º –Ω–µ—á–µ—Ç–µ–Ω –±—Ä–æ–π –∫—É–ø—á–∏–Ω–∏.
2. **Nim —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –ú–æ–∂–µ –¥–∞ —Å–µ –≤–∑–∏–º–∞—Ç –Ω–∞–π-–º–Ω–æ–≥–æ $K$ –∫–∞–º—ä—á–µ—Ç–∞.
   - –ï–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –Ω–∞ –∫—É–ø—á–∏–Ω–∞ —Å —Ä–∞–∑–º–µ—Ä $N % (K+1)$.
3. **Staircase Nim**: –ú–æ–Ω–µ—Ç–∏ –Ω–∞ —Å—Ç—ä–ø–∞–ª–∞. –ú–µ—Å—Ç–µ–Ω–µ—Ç–æ –æ—Ç —Å—Ç—ä–ø–∞–ª–æ $i$ –Ω–∞ $i-1$ –µ –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –Ω–∞ –º–∞—Ö–∞–Ω–µ.
   - –û—Ç—á–∏—Ç–∞—Ç —Å–µ —Å–∞–º–æ —Å—Ç—ä–ø–∞–ª–∞—Ç–∞ –Ω–∞ **–Ω–µ—á–µ—Ç–Ω–∏** –ø–æ–∑–∏—Ü–∏–∏ (1, 3, 5...). 

---

## üèÜ –ú–∏–Ω–∏–º–∞–∫—Å —Å –ú–µ–º–æ–∏–∑–∞—Ü–∏—è

–ó–∞ –∏–≥—Ä–∏, –∫–æ–∏—Ç–æ –Ω–µ —Å–∞ –±–µ–∑–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–∏ (–Ω—è–º–∞—Ç –ì—Ä—ä–Ω–¥–∏ —á–∏—Å–ª–∞), –∏–∑–ø–æ–ª–∑–≤–∞–º–µ —Ä–µ–∫—É—Ä—Å–∏—è —Å –ø–∞–º–µ—Ç.

```cpp
int memo[MAX_STATE];
// 1: –ü–µ—á–µ–ª–∏, -1: –ì—É–±–∏
int solve(int state) {
    if (is_terminal(state)) return -1; // –ù—è–º–∞ —Ö–æ–¥–æ–≤–µ -> –≥—É–±–∏–º
    if (memo[state] != 0) return memo[state];

    int res = -1; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–º–µ, —á–µ –≥—É–±–∏–º
    for (int next_state : get_moves(state)) {
        if (solve(next_state) == -1) { // –ê–∫–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫—ä—Ç –≥—É–±–∏ –æ—Ç —Å–ª–µ–¥–≤–∞—â–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ
            res = 1; // –ù–∏–µ –ø–µ—á–µ–ª–∏–º
            break;
        }
    }
    return memo[state] = res;
}
```

---

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ö–ª—é—á—ä—Ç –∫—ä–º –∑–∞–¥–∞—á–∏—Ç–µ –æ—Ç —Ç–∏–ø "–ò–≥—Ä–∞" –µ –¥–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ:
1. –ò–º–∞ –ª–∏ –∏–≥—Ä–∞—Ç–∞ –ì—Ä—ä–Ω–¥–∏ —á–∏—Å–ª–∞? (–ë–µ–∑–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–∞ –ª–∏ –µ?) $\to$ –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ XOR/mex.
2. –ò–º–∞ –ª–∏ –º–∞–ª–∫–æ —Å—ä—Å—Ç–æ—è–Ω–∏—è? $\to$ –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –ú–∏–Ω–∏–º–∞–∫—Å/–†–µ—Ç—Ä–æ–≥—Ä–∞–¥–µ–Ω –∞–Ω–∞–ª–∏–∑.
3. –ò–º–∞ –ª–∏ —Å–∏–º–µ—Ç—Ä–∏—è? $\to$ –¢—ä—Ä—Å–µ—Ç–µ –æ–≥–ª–µ–¥–∞–ª–Ω–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

```