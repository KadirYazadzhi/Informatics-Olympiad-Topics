# üéÆ –ù–∞–ø—Ä–µ–¥–Ω–∞–ª–∞ –¢–µ–æ—Ä–∏—è –Ω–∞ –ò–≥—Ä–∏—Ç–µ (Game Theory)

–ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–Ω–∞—Ç–∞ —Ç–µ–æ—Ä–∏—è –Ω–∞ –∏–≥—Ä–∏—Ç–µ —Ä–∞–∑–≥–ª–µ–∂–¥–∞ –∏–≥—Ä–∏, –∫–æ–∏—Ç–æ —Å–∞:
1.  **Impartial (–ë–µ–∑–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–∏)**: –î–æ—Å—Ç—ä–ø–Ω–∏—Ç–µ —Ö–æ–¥–æ–≤–µ –∑–∞–≤–∏—Å—è—Ç —Å–∞–º–æ –æ—Ç —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –∏–≥—Ä–∞—Ç–∞, –∞ –Ω–µ –æ—Ç —Ç–æ–≤–∞ –∫–æ–π –∏–≥—Ä–∞—á –µ –Ω–∞ —Ö–æ–¥. (–®–∞—Ö—ä—Ç –ù–ï –µ —Ç–∞–∫–∞–≤–∞ –∏–≥—Ä–∞, –∑–∞—â–æ—Ç–æ –±–µ–ª–∏—Ç–µ –Ω–µ –º–æ–≥–∞—Ç –¥–∞ –º–µ—Å—Ç—è—Ç —á–µ—Ä–Ω–∏ —Ñ–∏–≥—É—Ä–∏).
2.  **Perfect Information (–ü—ä–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)**: –ù—è–º–∞ —Å–∫—Ä–∏—Ç–∏ –∫–∞—Ä—Ç–∏ –∏–ª–∏ –∑–∞—Ä–æ–≤–µ.
3.  **Normal Play Convention**: –ü–æ—Å–ª–µ–¥–Ω–∏—è—Ç –∏–≥—Ä–∞—á, –∫–æ–π—Ç–æ –º–æ–∂–µ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ —Ö–æ–¥, –ø–µ—á–µ–ª–∏ (–∏–ª–∏ —Ç–æ–∑–∏, –∫–æ–π—Ç–æ –Ω–µ –º–æ–∂–µ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ —Ö–æ–¥, –≥—É–±–∏).

## 1. –ò–≥—Ä–∞—Ç–∞ –Ω–∞ –ù–∏–º (Nim Game)

–¢–æ–≤–∞ –µ "–º–∞–π–∫–∞—Ç–∞" –Ω–∞ –≤—Å–∏—á–∫–∏ –±–µ–∑–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–∏ –∏–≥—Ä–∏.
*   **–ü—Ä–∞–≤–∏–ª–∞**: –ò–º–∞ $K$ –∫—É–ø—á–∏–Ω–∏ —Å –∫–∞–º—ä—á–µ—Ç–∞ —Å —Ä–∞–∑–º–µ—Ä–∏ $a_1, a_2, ‚Ä¶, a_k$. –î–≤–∞–º–∞ –∏–≥—Ä–∞—á–∏ —Å–µ —Ä–µ–¥—É–≤–∞—Ç –¥–∞ –∏–∑–±–∏—Ä–∞—Ç –µ–¥–Ω–∞ –∫—É–ø—á–∏–Ω–∞ –∏ –¥–∞ –ø—Ä–µ–º–∞—Ö–≤–∞—Ç –ø—Ä–æ–∏–∑–≤–æ–ª–µ–Ω –±—Ä–æ–π –∫–∞–º—ä—á–µ—Ç–∞ –æ—Ç –Ω–µ—è (–ø–æ–Ω–µ –µ–¥–Ω–æ).
*   **–£—Å–ª–æ–≤–∏–µ –∑–∞ –ø–æ–±–µ–¥–∞**: –ö–æ–π—Ç–æ –≤–∑–µ–º–µ –ø–æ—Å–ª–µ–¥–Ω–æ—Ç–æ –∫–∞–º—ä—á–µ, –ø–µ—á–µ–ª–∏.

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è (Nim-Sum)
–ü–æ–±–µ–¥–∏—Ç–µ–ª—è—Ç —Å–µ –æ–ø—Ä–µ–¥–µ–ª—è —á—Ä–µ–∑ **XOR —Å—É–º–∞—Ç–∞** –Ω–∞ —Ä–∞–∑–º–µ—Ä–∏—Ç–µ –Ω–∞ –∫—É–ø—á–∏–Ω–∏—Ç–µ:
$S = a_1 ‚äï a_2 ‚äï ‚Ä¶ ‚äï a_k$

*   –ê–∫–æ $S ‚â† 0$: –¢–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –µ **–ü–µ—á–µ–ª–∏–≤—à–∞** (N-position). –ü—ä—Ä–≤–∏—è—Ç –∏–≥—Ä–∞—á –º–æ–∂–µ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ —Ö–æ–¥, –∫–æ–π—Ç–æ –¥–∞ –¥–æ–≤–µ–¥–µ —Å—É–º–∞—Ç–∞ –¥–æ 0.
*   –ê–∫–æ $S = 0$: –¢–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –µ **–ì—É–±–µ—â–∞** (P-position). –í—Å—è–∫–∞–∫—ä–≤ —Ö–æ–¥ —â–µ –Ω–∞–ø—Ä–∞–≤–∏ —Å—É–º–∞—Ç–∞ —Ä–∞–∑–ª–∏—á–Ω–∞ –æ—Ç 0.

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—Å—Ç–≤–æ**:
1.  –ö—Ä–∞–π–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ (–≤—Å–∏—á–∫–∏ 0) –∏–º–∞ XOR —Å—É–º–∞ 0.
2.  –û—Ç —Å—ä—Å—Ç–æ—è–Ω–∏–µ —Å $S=0$ –≤—Å–µ–∫–∏ —Ö–æ–¥ –≤–æ–¥–∏ –¥–æ $S ‚â† 0$.
3.  –û—Ç —Å—ä—Å—Ç–æ—è–Ω–∏–µ —Å $S ‚â† 0$ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ —Ö–æ–¥, –∫–æ–π—Ç–æ –≤–æ–¥–∏ –¥–æ $S=0$. –ù–µ–∫–∞ $d$ –µ –Ω–∞–π-—Å—Ç–∞—Ä—à–∏—è—Ç –±–∏—Ç –Ω–∞ $S$. –ò–∑–±–∏—Ä–∞–º–µ –∫—É–ø—á–∏–Ω–∞ $a_i$, –∫–æ—è—Ç–æ –∏–º–∞ —Ç–æ–∑–∏ –±–∏—Ç (1). –ó–∞–º–µ–Ω—è–º–µ $a_i$ —Å $a_i ‚äï S$. –¢—ä–π –∫–∞—Ç–æ $a_i ‚äï S < a_i$, —Ç–æ–≤–∞ –µ –≤–∞–ª–∏–¥–µ–Ω —Ö–æ–¥.

## 2. –¢–µ–æ—Ä–µ–º–∞ –Ω–∞ –°–ø—Ä–µ–π–≥-–ì—Ä—ä–Ω–¥–∏ (Sprague-Grundy)

–¢–∞–∑–∏ —Ç–µ–æ—Ä–µ–º–∞ –≥–ª–∞—Å–∏, —á–µ **–≤—Å—è–∫–∞** –±–µ–∑–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–∞ –∏–≥—Ä–∞ –µ –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ –Ω–∞ –∫—É–ø—á–∏–Ω–∞ –Ω–∞ –ù–∏–º —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —Ä–∞–∑–º–µ—Ä. –¢–æ–∑–∏ —Ä–∞–∑–º–µ—Ä —Å–µ –Ω–∞—Ä–∏—á–∞ **Grundy —á–∏—Å–ª–æ** (–∏–ª–∏ nim-value) –Ω–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ.

### 2.1. –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ Grundy —á–∏—Å–ª–∞ (MEX)
–ó–∞ –¥–∞–¥–µ–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ $u$, Grundy —á–∏—Å–ª–æ—Ç–æ $g(u)$ —Å–µ –¥–µ—Ñ–∏–Ω–∏—Ä–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–∞—Ç–æ:
$g(u) = \text{MEX}(\{ g(v) \mid u \to v \text{ –µ –≤–∞–ª–∏–¥–µ–Ω —Ö–æ–¥} \})$

**MEX (Minimum Excluded value)** –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∏ —Ü–µ–ª–∏ —á–∏—Å–ª–∞ –µ –Ω–∞–π-–º–∞–ª–∫–æ—Ç–æ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–æ —Ü—è–ª–æ —á–∏—Å–ª–æ, –∫–æ–µ—Ç–æ **–ù–ï** –ø—Ä–∏—Å—ä—Å—Ç–≤–∞ –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ—Ç–æ.
*   $\text{MEX}(\{0, 1, 3\}) = 2$
*   $\text{MEX}(\{1, 2, 5\}) = 0$
*   $\text{MEX}(\emptyset) = 0$ (–∑–∞ –≥—É–±–µ—â–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è)

### 2.2. –ö–æ–º–±–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –∏–≥—Ä–∏
–ê–∫–æ –µ–¥–Ω–∞ –∏–≥—Ä–∞ —Å–µ —Å—ä—Å—Ç–æ–∏ –æ—Ç –Ω—è–∫–æ–ª–∫–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∏ –ø–æ–¥-–∏–≥—Ä–∏ (–Ω–∞–ø—Ä. –Ω—è–∫–æ–ª–∫–æ —Ñ–∏–≥—É—Ä–∏ –Ω–∞ –¥—ä—Å–∫–∞, –∫–æ–∏—Ç–æ –Ω–µ —Å–∏ –ø—Ä–µ—á–∞—Ç), Grundy —á–∏—Å–ª–æ—Ç–æ –Ω–∞ –æ–±—â–∞—Ç–∞ –∏–≥—Ä–∞ –µ **XOR —Å—É–º–∞—Ç–∞** –Ω–∞ Grundy —á–∏—Å–ª–∞—Ç–∞ –Ω–∞ –ø–æ–¥-–∏–≥—Ä–∏—Ç–µ.
$G_{total} = g(G_1) ‚äï g(G_2) ‚äï ‚Ä¶ ‚äï g(G_k)$

–¢–æ–≤–∞ –µ –∏–∑–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –º–æ—â–Ω–æ! –í–º–µ—Å—Ç–æ –¥–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞–º–µ —Å–ª–æ–∂–Ω–∞—Ç–∞ –∏–≥—Ä–∞ –∫–∞—Ç–æ —Ü—è–ª–æ, —è —Ä–∞–∑–±–∏–≤–∞–º–µ –Ω–∞ —á–∞—Å—Ç–∏, —Å–º—è—Ç–∞–º–µ MEX –∑–∞ –≤—Å—è–∫–∞ —á–∞—Å—Ç –∏ –ø—Ä–∞–≤–∏–º XOR.

### –ü—Ä–∏–º–µ—Ä: –ò–≥—Ä–∞ –≤—ä—Ä—Ö—É –ì—Ä–∞—Ñ
–ò–º–∞–º–µ –ø—É–ª—á–µ –≤—ä—Ä—Ö—É –≤—Ä—ä—Ö –Ω–∞ –Ω–∞—Å–æ—á–µ–Ω –∞—Ü–∏–∫–ª–∏—á–µ–Ω –≥—Ä–∞—Ñ (DAG). –ò–≥—Ä–∞—á–∏—Ç–µ –º–µ—Å—Ç—è—Ç –ø—É–ª—á–µ—Ç–æ –ø–æ —Ä–µ–±—Ä–∞—Ç–∞. –ö–æ–π—Ç–æ –Ω–µ –º–æ–∂–µ –¥–∞ –º—Ä—ä–¥–Ω–µ, –≥—É–±–∏.
–†–µ—à–µ–Ω–∏–µ:
1.  –ó–∞ –≤—Å–µ–∫–∏ –≤—Ä—ä—Ö $u$ –ø—Ä–µ—Å–º—è—Ç–∞–º–µ $g(u)$ —á—Ä–µ–∑ DFS –∏ –º–µ–º–æ–∏–∑–∞—Ü–∏—è.
2.  –ê–∫–æ –∏–º–∞–º–µ $K$ –ø—É–ª—á–µ—Ç–∞, –ø–æ–∑–∏—Ü–∏—è—Ç–∞ –µ –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ –Ω–∞ Nim —Å –∫—É–ø—á–∏–Ω–∏ —Å —Ä–∞–∑–º–µ—Ä–∏ $g(u_1), g(u_2), ‚Ä¶$.

```cpp
#include <vector>
#include <set>
#include <algorithm>

using namespace std;

const int MAXN = 1000;
vector<int> adj[MAXN];
int memo[MAXN];

int grundy(int u) {
    if (memo[u] != -1) return memo[u];
    
    set<int> reachable_values;
    for (int v : adj[u]) {
        reachable_values.insert(grundy(v));
    }
    
    int mex = 0;
    while (reachable_values.count(mex)) mex++;
    
    return memo[u] = mex;
}
```

## 3. –í–∞—Ä–∏–∞—Ü–∏–∏ –Ω–∞ –∏–≥—Ä–∏

### 3.1. Staircase Nim
–ú–æ–Ω–µ—Ç–∏ —Å–∞ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏ –Ω–∞ —Å—Ç—ä–ø–∞–ª–∞—Ç–∞ –Ω–∞ —Å—Ç—ä–ª–±–∏—â–µ (0, 1, 2...). –•–æ–¥—ä—Ç –µ: –ø—Ä–µ–º–µ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–ª–µ–Ω –±—Ä–æ–π –º–æ–Ω–µ—Ç–∏ –æ—Ç —Å—Ç—ä–ø–∞–ª–æ $i$ –Ω–∞ —Å—Ç—ä–ø–∞–ª–æ $i-1$. –ú–æ–Ω–µ—Ç–∏—Ç–µ –æ—Ç —Å—Ç—ä–ø–∞–ª–æ 0 —Å–µ –ø—Ä–µ–º–∞—Ö–≤–∞—Ç.
**–†–µ—à–µ–Ω–∏–µ**: –ò–º–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å–∞–º–æ –º–æ–Ω–µ—Ç–∏—Ç–µ –Ω–∞ **–Ω–µ—á–µ—Ç–Ω–∏—Ç–µ –ø–æ–∑–∏—Ü–∏–∏** (1, 3, 5...).
*   –ü—Ä–µ–º–µ—Å—Ç–≤–∞–Ω–µ –æ—Ç –Ω–µ—á–µ—Ç–Ω–æ –Ω–∞ —á–µ—Ç–Ω–æ ($i ‚Üí i-1$) –µ –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –Ω–∞ –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –º–æ–Ω–µ—Ç–∏ –æ—Ç Nim –∫—É–ø—á–∏–Ω–∞ (–∑–∞—â–æ—Ç–æ —á–µ—Ç–Ω–∏—Ç–µ –Ω–µ —Å–µ –±—Ä–æ—è—Ç).
*   –ü—Ä–µ–º–µ—Å—Ç–≤–∞–Ω–µ –æ—Ç —á–µ—Ç–Ω–æ –Ω–∞ –Ω–µ—á–µ—Ç–Ω–æ ($i ‚Üí i-1$) –µ –æ–±—Ä–∞—Ç–∏–º–æ –æ—Ç –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (—Ç–æ–π –º–æ–∂–µ –¥–∞ –≥–∏ –ø—Ä–µ–º–µ—Å—Ç–∏ –Ω–∞ $i-2$).
*   –û—Ç–≥–æ–≤–æ—Ä: $a_1 ‚äï a_3 ‚äï a_5 ‚Ä¶$

### 3.2. Green Hackenbush
–ò–≥—Ä–∞ –≤—ä—Ä—Ö—É –≥—Ä–∞—Ñ–∏, –∫—ä–¥–µ—Ç–æ —Ä—ä–±–æ–≤–µ—Ç–µ —Å–µ –ø—Ä–µ–º–∞—Ö–≤–∞—Ç.
*   –í—Å–µ–∫–∏ —Ä—ä–± –µ –∏–ª–∏ "–∑–µ–ª–µ–Ω" (–º–æ–∂–µ –¥–∞ —Å–µ –º–∞—Ö–∞ –æ—Ç –≤—Å–µ–∫–∏), –∏–ª–∏ —Å—Ç—ä–ø–≤–∞ –Ω–∞ –∑–µ–º—è—Ç–∞.
*   –ü—Ä–∏ –º–∞—Ö–∞–Ω–µ –Ω–∞ —Ä—ä–±, –≤—Å–∏—á–∫–æ, –∫–æ–µ—Ç–æ –Ω–µ –µ —Å–≤—ä—Ä–∑–∞–Ω–æ —Å—ä—Å –∑–µ–º—è—Ç–∞, –ø–∞–¥–∞ (–∏–∑—á–µ–∑–≤–∞).
*   –ó–∞ –¥—ä—Ä–≤–µ—Ç–∞: $g(u) = (\oplus_{v \in children} (g(v) + 1))$.

## 4. Misere Play
–í–∞—Ä–∏–∞–Ω—Ç—ä—Ç, –∫—ä–¥–µ—Ç–æ **–ø–æ—Å–ª–µ–¥–Ω–∏—è—Ç –∏–≥—Ä–∞—á –≥—É–±–∏**.
*   –ó–∞ –æ–±–∏–∫–Ω–æ–≤–µ–Ω–∏—è Nim: –°—Ç—Ä–∞—Ç–µ–≥–∏—è—Ç–∞ –µ —Å—ä—â–∞—Ç–∞ –∫–∞—Ç–æ Normal Play, –æ—Å–≤–µ–Ω –∞–∫–æ –≤—Å–∏—á–∫–∏ –∫—É–ø—á–∏–Ω–∏ –Ω–µ —Å–∞ —Å —Ä–∞–∑–º–µ—Ä 1.
    *   –ê–∫–æ –≤—Å–∏—á–∫–∏ —Å–∞ 1: –ü–µ—á–µ–ª–∏ —Å–µ, –∞–∫–æ –±—Ä–æ—è—Ç –∏–º –µ –Ω–µ—á–µ—Ç–µ–Ω (XOR = 1).
    *   –í –ø—Ä–æ—Ç–∏–≤–µ–Ω —Å–ª—É—á–∞–π: –ò–≥—Ä–∞–µ–º –ø–æ –Ω–æ—Ä–º–∞–ª–Ω–∞—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è.

## 5. –ó–∞–¥–∞—á–∏ –∑–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
1.  **HackerRank "Game of Stones"**: –ü—Ä–æ—Å—Ç–∞ –∏–≥—Ä–∞ —Å –∏–∑–≤–∞–∂–¥–∞–Ω–µ, —Ä–µ—à–∞–≤–∞ —Å–µ —Å DP/Grundy.
2.  **SPOJ ADAGAME**: –ò–≥—Ä–∞ –≤—ä—Ä—Ö—É –≥—Ä–∞—Ñ —Å —Ü–∏–∫–ª–∏ (–∏–∑–∏—Å–∫–≤–∞ –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω –∞–Ω–∞–ª–∏–∑).
3.  **Codeforces 768E**: Game of Stones (–ø—Ä–µ–∫–∞–ª–∫—É–ª–∞—Ü–∏—è –Ω–∞ Grundy —á–∏—Å–ª–∞—Ç–∞).
4.  **UVa 10165**: Stone Game (–ß–∏—Å—Ç Nim).

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–í–∏–¥–∏—Ç–µ –ª–∏ –∏–≥—Ä–∞ –≤ —Å—ä—Å—Ç–µ–∑–∞–Ω–∏–µ:
1.  –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –µ –±–µ–∑–ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–Ω–∞.
2.  –ê–∫–æ –¥–∞ -> Grundy —Ç–µ–æ—Ä–µ–º–∞ (XOR).
3.  –†–∞–∑–±–∏–π—Ç–µ —è –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∏ –ø–æ–¥-–∏–≥—Ä–∏.
4.  –°–º–µ—Ç–Ω–µ—Ç–µ MEX.
