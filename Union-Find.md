# üîó –ü—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ –Ω–µ–ø—Ä–µ—Å–∏—á–∞—â–∏ —Å–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ (Union-Find / DSU)

## üîó –ö–∞–∫–≤–æ –µ DSU (Disjoint Set Union)?

DSU –µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏, –∫–æ—è—Ç–æ –ø–æ–∑–≤–æ–ª—è–≤–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–µ–∫—Ü–∏—è –æ—Ç –Ω–µ–ø—Ä–µ—Å–∏—á–∞—â–∏ —Å–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞. –¢—è –ø–æ–¥–¥—ä—Ä–∂–∞ –¥–≤–µ –æ—Å–Ω–æ–≤–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏:
1. **Find**: –ù–∞–º–∏—Ä–∞ –≤ –∫–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–µ –Ω–∞–º–∏—Ä–∞ –¥–∞–¥–µ–Ω –µ–ª–µ–º–µ–Ω—Ç (–≤—Ä—ä—â–∞ "–ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª" –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ—Ç–æ).
2. **Union**: –û–±–µ–¥–∏–Ω—è–≤–∞ –¥–≤–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –≤ –µ–¥–Ω–æ.

---

## üõ†Ô∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–ù–∞–∏–≤–Ω–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –±–∞–≤–Ω–∞. –ó–∞—Ç–æ–≤–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –¥–≤–µ –∫–ª—é—á–æ–≤–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

### 1. Path Compression (–ö–æ–º–ø—Ä–µ—Å–∏—è –Ω–∞ –ø—ä—Ç—è)
–ö–æ–≥–∞—Ç–æ —Ç—ä—Ä—Å–∏–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª, –ø—Ä–∞–≤–∏–º —Ç–∞–∫–∞, —á–µ –≤—Å–∏—á–∫–∏ –æ–±—Ö–æ–¥–µ–Ω–∏ –≤—ä–∑–ª–∏ –¥–∞ —Å–æ—á–∞—Ç –¥–∏—Ä–µ–∫—Ç–Ω–æ –∫—ä–º –Ω–µ–≥–æ. –¢–æ–≤–∞ –¥—Ä–∞—Å—Ç–∏—á–Ω–æ –Ω–∞–º–∞–ª—è–≤–∞ –¥—ä–ª–±–æ—á–∏–Ω–∞—Ç–∞ –Ω–∞ –¥—ä—Ä–≤–æ—Ç–æ.

### 2. Union by Rank/Size (–û–±–µ–¥–∏–Ω—è–≤–∞–Ω–µ –ø–æ —Ä–∞–Ω–≥/—Ä–∞–∑–º–µ—Ä)
–í–∏–Ω–∞–≥–∏ –ø—Ä–∏–∫–∞—á–≤–∞–º–µ –ø–æ-–º–∞–ª–∫–æ—Ç–æ –¥—ä—Ä–≤–æ –∫—ä–º –∫–æ—Ä–µ–Ω–∞ –Ω–∞ –ø–æ-–≥–æ–ª—è–º–æ—Ç–æ, –∑–∞ –¥–∞ –∑–∞–ø–∞–∑–∏–º –¥—ä—Ä–≤–æ—Ç–æ –±–∞–ª–∞–Ω—Å–∏—Ä–∞–Ω–æ.

### –ö–æ–¥ –Ω–∞ C++:
```cpp
struct DSU {
    std::vector<int> parent;
    std::vector<int> size;

    DSU(int n) {
        parent.resize(n + 1);
        size.resize(n + 1, 1);
        for (int i = 0; i <= n; i++) parent[i] = i;
    }

    int find(int i) {
        if (parent[i] == i) return i;
        return parent[i] = find(parent[i]); // Path compression
    }

    void unite(int i, int j) {
        int root_i = find(i);
        int root_j = find(j);
        if (root_i != root_j) {
            // Union by size
            if (size[root_i] < size[root_j]) std::swap(root_i, root_j);
            parent[root_j] = root_i;
            size[root_i] += size[root_j];
        }
    }
};
```

---

## üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. **–ê–ª–≥–æ—Ä–∏—Ç—ä–º –Ω–∞ –ö—Ä—É—Å–∫–∞–ª**: –ó–∞ –±—ä—Ä–∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ –¥–æ–±–∞–≤—è–Ω–µ—Ç–æ –Ω–∞ —Ä–µ–±—Ä–æ —â–µ –æ–±—Ä–∞–∑—É–≤–∞ —Ü–∏–∫—ä–ª.
2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–∞ —Å–≤—ä—Ä–∑–∞–Ω–æ—Å—Ç**: –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ –±—Ä–æ—è —Å–≤—ä—Ä–∑–∞–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤ –≥—Ä–∞—Ñ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ (–ø—Ä–∏ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ —Ä–µ–±—Ä–∞).
3. **–ü–µ—Ä–∫–æ–ª–∞—Ü–∏—è –∏ –º—Ä–µ–∂–æ–≤–∞ —Å–≤—ä—Ä–∑–∞–Ω–æ—Å—Ç**: –°–∏–º—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ü–µ—Å–∏.
4. **Offline –∑–∞—è–≤–∫–∏ –∑–∞ —Å–≤—ä—Ä–∑–∞–Ω–æ—Å—Ç**: –ö–æ–≥–∞—Ç–æ –∏–º–∞–º–µ —Å–ø–∏—Å—ä–∫ –æ—Ç —Ä–µ–±—Ä–∞ –∏ —Ç—Ä—è–±–≤–∞ –¥–∞ –æ—Ç–≥–æ–≤–∞—Ä—è–º–µ –Ω–∞ –≤—ä–ø—Ä–æ—Å–∏ "–°–≤—ä—Ä–∑–∞–Ω–∏ –ª–∏ —Å–∞ A –∏ B?".

---

## ‚è±Ô∏è –°–ª–æ–∂–Ω–æ—Å—Ç
–ë–ª–∞–≥–æ–¥–∞—Ä–µ–Ω–∏–µ –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏—Ç–µ, –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ —Ä–∞–±–æ—Ç—è—Ç –∑–∞ –ø–æ—á—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—Ä–µ–º–µ ‚Äì $O(\alpha(n))$, –∫—ä–¥–µ—Ç–æ $\alpha$ –µ –æ–±—Ä–∞—Ç–Ω–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞ –ê–∫–µ—Ä–º–∞–Ω (–∫–æ—è—Ç–æ —Ä–∞—Å—Ç–µ –∏–∑–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –±–∞–≤–Ω–æ –∏ –∑–∞ –≤—Å–∏—á–∫–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ü–µ–ª–∏ –µ $\le 5$).

---

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Union-Find –µ –µ–¥–Ω–∞ –æ—Ç –Ω–∞–π-–µ–ª–µ–≥–∞–Ω—Ç–Ω–∏—Ç–µ –∏ –º–æ—â–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –æ—Ç –¥–∞–Ω–Ω–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ—Ç–æ. –¢—è –µ –ª–µ—Å–Ω–∞ –∑–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω–µ –∏ –∏–∑–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –∑–∞ –∑–∞–¥–∞—á–∏, —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å—ä—Å —Å–≤—ä—Ä–∑–∞–Ω–æ—Å—Ç –∏ –≥—Ä—É–ø–∏—Ä–∞–Ω–µ. üöÄ
