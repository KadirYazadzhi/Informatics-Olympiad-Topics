# üìê –ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–Ω–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—è (Advanced)

## üìê –û—Ä–∏–µ–Ω—Ç–∏—Ä–∞–Ω–∞ —Ç—Ä–æ–π–∫–∞ —Ç–æ—á–∫–∏ (Cross Product)

–ï–¥–∏–Ω –æ—Ç –Ω–∞–π-–º–æ—â–Ω–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –≤ –≥–µ–æ–º–µ—Ç—Ä–∏—è—Ç–∞ –µ –≤–µ–∫—Ç–æ—Ä–Ω–æ—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (Cross Product). –ó–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ $A, B$ –∏ $C$, —Ç–æ –Ω–∏ –∫–∞–∑–≤–∞ –ø–æ—Å–æ–∫–∞—Ç–∞ –Ω–∞ –∑–∞–≤–æ—è.

### –§–æ—Ä–º—É–ª–∞ –∑–∞ –ø–ª–æ—â (Cross Product):
$$S = (x_B - x_A)(y_C - y_A) - (y_B - y_A)(x_C - x_A)$$

### –¢—ä–ª–∫—É–≤–∞–Ω–µ:
- **$S > 0$**: –ó–∞–≤–æ—è—Ç $A \to B \to C$ –µ –Ω–∞–ª—è–≤–æ (–æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —á–∞—Å–æ–≤–Ω–∏–∫–æ–≤–∞—Ç–∞ —Å—Ç—Ä–µ–ª–∫–∞).
- **$S < 0$**: –ó–∞–≤–æ—è—Ç –µ –Ω–∞–¥—è—Å–Ω–æ (–ø–æ —á–∞—Å–æ–≤–Ω–∏–∫–æ–≤–∞—Ç–∞ —Å—Ç—Ä–µ–ª–∫–∞).
- **$S = 0$**: –¢–æ—á–∫–∏—Ç–µ —Å–∞ –∫–æ–ª–∏–Ω–µ–∞—Ä–Ω–∏ (–ª–µ–∂–∞—Ç –Ω–∞ –µ–¥–Ω–∞ –ø—Ä–∞–≤–∞).

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –ø—Ä–µ—Å–∏—á–∞–Ω–µ –Ω–∞ –æ—Ç—Å–µ—á–∫–∏, –Ω–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ –∏–∑–ø—ä–∫–Ω–∞–ª–∞ –æ–±–≤–∏–≤–∫–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ —Ç–æ—á–∫–∞ –µ –≤ –ø–æ–ª–∏–≥–æ–Ω.

---

## üßπ –¢–µ—Ö–Ω–∏–∫–∞ –Ω–∞ –∑–∞–º–∏—Ç–∞—â–∞—Ç–∞ –ø—Ä–∞–≤–∞ (Sweep-line)

Sweep-line –µ –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–Ω–∞ –ø–∞—Ä–∞–¥–∏–≥–º–∞, –ø—Ä–∏ –∫–æ—è—Ç–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–Ω–∞ (–∏–ª–∏ —Ö–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–Ω–∞) –ø—Ä–∞–≤–∞ —Å–µ –¥–≤–∏–∂–∏ –ø—Ä–µ–∑ —Ä–∞–≤–Ω–∏–Ω–∞—Ç–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–≤–∞ —Å—ä–±–∏—Ç–∏—è (—Ç–æ—á–∫–∏, –∫—Ä–∞–π –Ω–∞ –æ—Ç—Å–µ—á–∫–∏ –∏ –¥—Ä.).

### –ö–ª–∞—Å–∏—á–µ—Å–∫–∏ –∑–∞–¥–∞—á–∏:
1. **–ü—Ä–µ—Å–∏—á–∞–Ω–µ –Ω–∞ –æ—Ç—Å–µ—á–∫–∏**: –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –ø—Ä–µ—Å–µ—á–Ω–∏ —Ç–æ—á–∫–∏ —Å—Ä–µ–¥ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç—Å–µ—á–∫–∏.
2. **–û–±–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∞–≤–æ—ä–≥—ä–ª–Ω–∏—Ü–∏**: –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –ø–ª–æ—â—Ç–∞ –Ω–∞ –æ–±–µ–¥–∏–Ω–µ–Ω–∏–µ—Ç–æ –Ω–∞ $N$ –ø—Ä–∞–≤–æ—ä–≥—ä–ª–Ω–∏–∫–∞.
3. **–ù–∞–π-–±–ª–∏–∑–∫–∞ –¥–≤–æ–π–∫–∞ —Ç–æ—á–∫–∏**: –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ –¥–≤–æ–π–∫–∞—Ç–∞ —Ç–æ—á–∫–∏ —Å –º–∏–Ω–∏–º–∞–ª–Ω–æ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ –≤ $O(n \log n)$.

---

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä–µ–Ω –∫–æ–¥: –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ç–æ—á–∫–∏
```cpp
struct Point {
    long long x, y;
};

long long cross_product(Point a, Point b, Point c) {
    return (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x);
}

int orientation(Point a, Point b, Point c) {
    long long res = cross_product(a, b, c);
    if (res == 0) return 0; // –ö–æ–ª–∏–Ω–µ–∞—Ä–Ω–∏
    return (res > 0) ? 1 : 2; // 1 - –ù–∞–ª—è–≤–æ, 2 - –ù–∞–¥—è—Å–Ω–æ
}
```

---

## üõë –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –ø—Ä–µ—Å–∏—á–∞–Ω–µ –Ω–∞ –æ—Ç—Å–µ—á–∫–∏
–î–≤–µ –æ—Ç—Å–µ—á–∫–∏ $AB$ –∏ $CD$ —Å–µ –ø—Ä–µ—Å–∏—á–∞—Ç, –∞–∫–æ:
- $C$ –∏ $D$ —Å–∞ –æ—Ç —Ä–∞–∑–ª–∏—á–Ω–∏ —Å—Ç—Ä–∞–Ω–∏ –Ω–∞ –ø—Ä–∞–≤–∞—Ç–∞ $AB$.
- $A$ –∏ $B$ —Å–∞ –æ—Ç —Ä–∞–∑–ª–∏—á–Ω–∏ —Å—Ç—Ä–∞–Ω–∏ –Ω–∞ –ø—Ä–∞–≤–∞—Ç–∞ $CD$.

–¢–æ–≤–∞ —Å–µ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ —á—Ä–µ–∑ 4 –∏–∑–≤–∏–∫–≤–∞–Ω–∏—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –∑–∞ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è.

---

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–Ω–∞—Ç–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—è –∏–∑–∏—Å–∫–≤–∞ –ø—Ä–µ—Ü–∏–∑–Ω–æ—Å—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞ —Å —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—â–∞ –∑–∞–ø–µ—Ç–∞—è –∏ –≤–Ω–∏–º–∞–Ω–∏–µ –∫—ä–º –≥—Ä–∞–Ω–∏—á–Ω–∏—Ç–µ —Å–ª—É—á–∞–∏ (–ø–∞—Ä–∞–ª–µ–ª–Ω–∏ –ø—Ä–∞–≤–∏, —Å—ä–≤–ø–∞–¥–∞—â–∏ —Ç–æ—á–∫–∏). –í–µ–∫—Ç–æ—Ä–Ω–æ—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –µ –æ—Å–Ω–æ–≤–∞—Ç–∞, –≤—ä—Ä—Ö—É –∫–æ—è—Ç–æ —Å–µ –≥—Ä–∞–¥–∏ –≤—Å–∏—á–∫–æ –æ—Å—Ç–∞–Ω–∞–ª–æ. üöÄ
