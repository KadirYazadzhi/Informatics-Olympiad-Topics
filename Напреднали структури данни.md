# üìÇ –ù–∞–ø—Ä–µ–¥–Ω–∞–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –æ—Ç –¥–∞–Ω–Ω–∏: –ï–∫—Å–ø–µ—Ä—Ç–Ω–æ –Ω–∏–≤–æ

## üå≥ Treap —Å –ò–º–ø–ª–∏—Ü–∏—Ç–µ–Ω –∫–ª—é—á (Implicit Treap / Rope)

–í–º–µ—Å—Ç–æ –¥–∞ –ø–æ–ª–∑–≤–∞–º–µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∞ –∫–∞—Ç–æ –∫–ª—é—á –∑–∞ BST, –∏–∑–ø–æ–ª–∑–≤–∞–º–µ –Ω–µ–≥–æ–≤–∏—è **–∏–Ω–¥–µ–∫—Å** –≤ –º–∞—Å–∏–≤–∞.
–¢—ä–π –∫–∞—Ç–æ –∏–Ω–¥–µ–∫—Å–∏—Ç–µ —Å–µ –ø—Ä–æ–º–µ–Ω—è—Ç –ø—Ä–∏ –≤–º—ä–∫–≤–∞–Ω–µ, –Ω–µ –≥–∏ –ø–∞–∑–∏–º —è–≤–Ω–æ. –í–º–µ—Å—Ç–æ —Ç–æ–≤–∞ –ø–∞–∑–∏–º `size` (—Ä–∞–∑–º–µ—Ä –Ω–∞ –ø–æ–¥–¥—ä—Ä–≤–æ—Ç–æ).
- –ò–Ω–¥–µ–∫—Å—ä—Ç –Ω–∞ –∫–æ—Ä–µ–Ω–∞ –µ `size(left)`.
- –ò–Ω–¥–µ–∫—Å—ä—Ç –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç –≤ –¥—è—Å–Ω–æ—Ç–æ –ø–æ–¥–¥—ä—Ä–≤–æ –µ `size(left) + 1 + index_in_right`.

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è**:
- –í–º—ä–∫–≤–∞–Ω–µ/–∏–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–ª–Ω–∞ –ø–æ–∑–∏—Ü–∏—è –≤ –º–∞—Å–∏–≤ –∑–∞ $O(\log N)$.
- –û–±—Ä—ä—â–∞–Ω–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª (Reverse range) –∑–∞ $O(\log N)$ —Å lazy propagation.
- –¶–∏–∫–ª–∏—á–Ω–æ –∏–∑–º–µ—Å—Ç–≤–∞–Ω–µ (Cut & Paste) –Ω–∞ –ø–æ–¥–º–∞—Å–∏–≤.
- –¢–æ–≤–∞ –µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –∑–∞–¥ `std::rope` (–Ω–æ –µ –¥–æ–±—Ä–µ –¥–∞ –º–æ–∂–µ—Ç–µ –¥–∞ —è –Ω–∞–ø–∏—à–µ—Ç–µ —Å–∞–º–∏).

---

## üìú –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ –°–µ–≥–º–µ–Ω—Ç–Ω–æ –î—ä—Ä–≤–æ

–ü–æ–∑–≤–æ–ª—è–≤–∞ –¥–æ—Å—Ç—ä–ø –¥–æ –ø—Ä–µ–¥–∏—à–Ω–∏ –≤–µ—Ä—Å–∏–∏ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞.
- –ö–æ–≥–∞—Ç–æ –æ–±–Ω–æ–≤—è–≤–∞–º–µ –≤—ä–∑–µ–ª, –≤–º–µ—Å—Ç–æ –¥–∞ –ø—Ä–æ–º–µ–Ω—è–º–µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –º—É, —Å—ä–∑–¥–∞–≤–∞–º–µ **–∫–æ–ø–∏–µ** –Ω–∞ –≤—ä–∑–µ–ª–∞ –∏ –ø—Ä–æ–º–µ–Ω—è–º–µ –∫–æ–ø–∏–µ—Ç–æ. –†–æ–¥–∏—Ç–µ–ª—è—Ç —Å—ä—â–æ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∫–æ–ø–∏—Ä–∞, –∑–∞ –¥–∞ —Å–æ—á–∏ –∫—ä–º –Ω–æ–≤–æ—Ç–æ –∫–æ–ø–∏–µ.
- –¢–æ–≤–∞ —Å—ä–∑–¥–∞–≤–∞ $O(\log N)$ –Ω–æ–≤–∏ –≤—ä–∑–µ–ª–∞ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è.

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: $K$-—Ç–æ —á–∏—Å–ª–æ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª $[L, R]$**
1. –°—Ç—Ä–æ–∏–º –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ –¥—ä—Ä–≤–æ, –∫—ä–¥–µ—Ç–æ –≤–µ—Ä—Å–∏—è $i$ —Å—ä–¥—ä—Ä–∂–∞ —á–∏—Å–ª–∞—Ç–∞ –æ—Ç $A[1 \dots i]$.
2. –ë—Ä–æ—è—Ç —á–∏—Å–ª–∞ —Å—ä—Å —Å—Ç–æ–π–Ω–æ—Å—Ç –≤ –¥–∏–∞–ø–∞–∑–æ–Ω $[val\_min, val\_max]$ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ $[L, R]$ –µ —Ä–∞–≤–µ–Ω –Ω–∞ `count(root[R]) - count(root[L-1])`.
3. –°–ø—É—Å–∫–∞–º–µ —Å–µ –ø–æ –¥—ä—Ä–≤–æ—Ç–æ (–ø–æ–¥–æ–±–Ω–æ –Ω–∞ –¥–≤–æ–∏—á–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ), –∑–∞ –¥–∞ –Ω–∞–º–µ—Ä–∏–º $K$-—Ç–æ—Ç–æ. –°–ª–æ–∂–Ω–æ—Å—Ç $O(\log N)$.

---

## üå≤ Link-Cut Tree

–î–∏–Ω–∞–º–∏—á–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞ –ø–æ–¥–¥—ä—Ä–∂–∞–Ω–µ –Ω–∞ –≥–æ—Ä–∞ –æ—Ç –¥—ä—Ä–≤–µ—Ç–∞.
- –û–ø–µ—Ä–∞—Ü–∏–∏: `link(u, v)` (—Å–≤—ä—Ä–∑–≤–∞ –¥–≤–µ –¥—ä—Ä–≤–µ—Ç–∞), `cut(u, v)` (—Ä–∞–∑–¥–µ–ª—è), `path_query(u, v)`.
- –ò–∑–ø–æ–ª–∑–≤–∞ **Splay Trees** –∑–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ –ø—ä—Ç–∏—â–∞—Ç–∞ (Heavy-Light Decomposition –∫–æ–Ω—Ü–µ–ø—Ü–∏—è, –Ω–æ –¥–∏–Ω–∞–º–∏—á–Ω–∞).
- –°–ª–æ–∂–Ω–æ—Å—Ç: $O(\log N)$ –∞–º–æ—Ä—Ç–∏–∑–∏—Ä–∞–Ω–æ.

---

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Implicit Treap –µ –Ω–∞–π-–º–æ—â–Ω–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞ –º–∞—Å–∏–≤–∏. –ú–æ–∂–µ –¥–∞ –∑–∞–º–µ—Å—Ç–∏ —Å–µ–≥–º–µ–Ω—Ç–Ω–æ –¥—ä—Ä–≤–æ –∏ –¥–∞ –ø—Ä–∞–≤–∏ –Ω–µ—â–∞, –∫–æ–∏—Ç–æ —Ç–æ –Ω–µ –º–æ–∂–µ (–≤–º—ä–∫–≤–∞–Ω–µ, –æ–±—Ä—ä—â–∞–Ω–µ). –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—Ç–∞ –µ –∫–ª—é—á–æ–≤–∞ –∑–∞ –∑–∞–¥–∞—á–∏ —Å "–∏—Å—Ç–æ—Ä–∏—è" –∏–ª–∏ 2D –∑–∞–¥–∞—á–∏, —Å–≤–µ–¥–µ–Ω–∏ –¥–æ 1D + –≤—Ä–µ–º–µ.