# üßπ –ú–µ—Ç–æ–¥ –Ω–∞ –ó–∞–º–∏—Ç–∞—â–∞—Ç–∞ –ü—Ä–∞–≤–∞ (Sweep Line)

–ú–µ—Ç–æ–¥—ä—Ç –Ω–∞ –∑–∞–º–∏—Ç–∞—â–∞—Ç–∞ –ø—Ä–∞–≤–∞ –µ –µ–¥–Ω–∞ –æ—Ç –Ω–∞–π-–º–æ—â–Ω–∏—Ç–µ —Ç–µ—Ö–Ω–∏–∫–∏ –≤ –∏–∑—á–∏—Å–ª–∏—Ç–µ–ª–Ω–∞—Ç–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—è. –û—Å–Ω–æ–≤–Ω–∞—Ç–∞ –∏–¥–µ—è –µ –¥–∞ –ø—Ä–µ–º–µ—Å—Ç–∏–º –≤–µ—Ä—Ç–∏–∫–∞–ª–Ω–∞ (–∏–ª–∏ —Ö–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–Ω–∞) –ø—Ä–∞–≤–∞ –ø—Ä–µ–∑ —Ä–∞–≤–Ω–∏–Ω–∞—Ç–∞ –∏ –¥–∞ –æ–±—Ä–∞–±–æ—Ç–≤–∞–º–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∏—Ç–µ –æ–±–µ–∫—Ç–∏ –≤ –º–æ–º–µ–Ω—Ç–∞, –≤ –∫–æ–π—Ç–æ –ø—Ä–∞–≤–∞—Ç–∞ –≥–∏ "–¥–æ–∫–æ—Å–Ω–µ".

---

## 1. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ó–∞–º–∏—Ç–∞—â–∞—Ç–∞ –ø—Ä–∞–≤–∞ –ø—Ä–µ–≤—Ä—ä—â–∞ 2D —Å—Ç–∞—Ç–∏—á–µ–Ω –ø—Ä–æ–±–ª–µ–º –≤ 1D –¥–∏–Ω–∞–º–∏—á–µ–Ω –ø—Ä–æ–±–ª–µ–º.
*   **–°—ä–±–∏—Ç–∏—è (Events)**: –¢–æ—á–∫–∏—Ç–µ, –≤ –∫–æ–∏—Ç–æ —Å–µ —Å–ª—É—á–≤–∞ –Ω–µ—â–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ (–Ω–∞—á–∞–ª–æ/–∫—Ä–∞–π –Ω–∞ –æ—Ç—Å–µ—á–∫–∞, –ø–æ–∑–∏—Ü–∏—è –Ω–∞ —Ç–æ—á–∫–∞). –°–æ—Ä—Ç–∏—Ä–∞–º–µ —Ç–µ–∑–∏ —Å—ä–±–∏—Ç–∏—è –ø–æ $x$-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞.
*   **–°—Ç–∞—Ç—É—Å (Status)**: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç –¥–∞–Ω–Ω–∏ (–æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ `std::set` –∏–ª–∏ Segment Tree), –∫–æ—è—Ç–æ –ø–∞–∑–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –æ–±–µ–∫—Ç–∏—Ç–µ, –∫–æ–∏—Ç–æ –≤ –º–æ–º–µ–Ω—Ç–∞ —Å–µ –ø—Ä–µ—Å–∏—á–∞—Ç –æ—Ç –ø—Ä–∞–≤–∞—Ç–∞.

---

## 2. –ù–∞–π-–±–ª–∏–∑–∫–∞ –¥–≤–æ–π–∫–∞ —Ç–æ—á–∫–∏ (Closest Pair of Points)

–î–∞–¥–µ–Ω–∏ —Å–∞ $N$ —Ç–æ—á–∫–∏. –¢—ä—Ä—Å–∏–º –¥–≤–µ—Ç–µ —Å –º–∏–Ω–∏–º–∞–ª–Ω–æ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ –ø–æ–º–µ–∂–¥—É —Å–∏.
–°–ª–æ–∂–Ω–æ—Å—Ç: $O(N \log N)$.

### –ê–ª–≥–æ—Ä–∏—Ç—ä–º:
1.  –°–æ—Ä—Ç–∏—Ä–∞–º–µ —Ç–æ—á–∫–∏—Ç–µ –ø–æ $x$.
2.  –î–≤–∏–∂–∏–º –ø—Ä–∞–≤–∞—Ç–∞ –ø—Ä–µ–∑ —Ç–æ—á–∫–∏—Ç–µ. –ù–µ–∫–∞ —Ç–µ–∫—É—â–æ—Ç–æ –º–∏–Ω–∏–º–∞–ª–Ω–æ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏–µ –µ $d$.
3.  –ó–∞ –≤—Å—è–∫–∞ –Ω–æ–≤–∞ —Ç–æ—á–∫–∞ $P$:
    *   –ü—Ä–µ–º–∞—Ö–≤–∞–º–µ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ —Ç–æ—á–∫–∏—Ç–µ, —á–∏—è—Ç–æ $x$-—Ä–∞–∑–ª–∏–∫–∞ —Å $P$ –µ $> d$.
    *   –í —Å—Ç–∞—Ç—É—Å–∞ –¥—ä—Ä–∂–∏–º —Ç–æ—á–∫–∏—Ç–µ, —Å–æ—Ä—Ç–∏—Ä–∞–Ω–∏ –ø–æ $y$. –¢—ä—Ä—Å–∏–º —Å–∞–º–æ —Ç–µ–∑–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ $[P.y - d, P.y + d]$.
    *   –î–æ–∫–∞–∑–∞–Ω–æ –µ, —á–µ –≤ —Ç–æ–∑–∏ –¥–∏–∞–ø–∞–∑–æ–Ω –∏–º–∞ –Ω–∞–π-–º–Ω–æ–≥–æ 5-6 —Ç–æ—á–∫–∏.
4.  –û–±–Ω–æ–≤—è–≤–∞–º–µ $d$.

```cpp
struct Point { long long x, y; };

double closest_pair(vector<Point>& pts) {
    sort(pts.begin(), pts.end(), [](Point a, Point b) { return a.x < b.x; });
    set<pair<int, int>> s; // {y, x}
    double d = 1e18;
    int j = 0;
    for (int i = 0; i < pts.size(); i++) {
        while (j < i && pts[i].x - pts[j].x >= d) {
            s.erase({pts[j].y, pts[j].x});
            j++;
        }
        auto it1 = s.lower_bound({pts[i].y - d, -2e9});
        auto it2 = s.upper_bound({pts[i].y + d, 2e9});
        for (auto it = it1; it != it2; it++) {
            d = min(d, dist(pts[i], {it->second, it->first}));
        }
        s.insert({pts[i].y, pts[i].x});
    }
    return d;
}
```

---

## 3. –ü–ª–æ—â –Ω–∞ –æ–±–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∞–≤–æ—ä–≥—ä–ª–Ω–∏—Ü–∏

–ò–º–∞–º–µ $N$ –ø—Ä–∞–≤–æ—ä–≥—ä–ª–Ω–∏–∫–∞. –¢—ä—Ä—Å–∏–º –ø–ª–æ—â—Ç–∞, –ø–æ–∫—Ä–∏—Ç–∞ –æ—Ç –ø–æ–Ω–µ –µ–¥–∏–Ω –æ—Ç —Ç—è—Ö.
–°–ª–æ–∂–Ω–æ—Å—Ç: $O(N \log N)$.

### –ê–ª–≥–æ—Ä–∏—Ç—ä–º:
1.  –°—ä–±–∏—Ç–∏—è: –í–µ—Ä—Ç–∏–∫–∞–ª–Ω–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏ –Ω–∞ –ø—Ä–∞–≤–æ—ä–≥—ä–ª–Ω–∏—Ü–∏—Ç–µ.
    *   –õ—è–≤–∞ —Å—Ç—Ä–∞–Ω–∞ (–ø–æ–∑–∏—Ü–∏—è $x$, –∏–Ω—Ç–µ—Ä–≤–∞–ª $[y_1, y_2]$, —Ç–∏–ø +1).
    *   –î—è—Å–Ω–∞ —Å—Ç—Ä–∞–Ω–∞ (–ø–æ–∑–∏—Ü–∏—è $x$, –∏–Ω—Ç–µ—Ä–≤–∞–ª $[y_1, y_2]$, —Ç–∏–ø -1).
2.  –°–æ—Ä—Ç–∏—Ä–∞–º–µ —Å—ä–±–∏—Ç–∏—è—Ç–∞ –ø–æ $x$.
3.  –ò–∑–ø–æ–ª–∑–≤–∞–º–µ –°–µ–≥–º–µ–Ω—Ç–Ω–æ –¥—ä—Ä–≤–æ –∑–∞ $y$-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏—Ç–µ. –í—Å—è–∫–æ –ª–∏—Å—Ç–æ –≤ –¥—ä—Ä–≤–æ—Ç–æ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∞ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∞—Ä–µ–Ω $y$-–∏–Ω—Ç–µ—Ä–≤–∞–ª (—Å–ª–µ–¥ –∫–æ–º–ø—Ä–µ—Å–∏—è –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏—Ç–µ).
4.  –î—ä—Ä–≤–æ—Ç–æ –ø–∞–∑–∏:
    *   `cnt`: –∫–æ–ª–∫–æ –ø—ä—Ç–∏ –µ –ø–æ–∫—Ä–∏—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª—ä—Ç.
    *   `len`: –æ–±—â–∞—Ç–∞ –¥—ä–ª–∂–∏–Ω–∞ –Ω–∞ –ø–æ–∫—Ä–∏—Ç–∏—Ç–µ —á–∞—Å—Ç–∏ –≤ —Ç–æ–≤–∞ –ø–æ–¥–¥—ä—Ä–≤–æ.
5.  –ü–ª–æ—â += `tree.root.len` * (—Ä–∞–∑–ª–∏–∫–∞—Ç–∞ –º–µ–∂–¥—É —Ç–µ–∫—É—â–∏—è –∏ –ø—Ä–µ–¥–∏—à–Ω–∏—è $x$).

---

## 4. –ò–∑–ø—ä–∫–Ω–∞–ª–∞ –û–±–≤–∏–≤–∫–∞ (Convex Hull)

–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –Ω–∞ –ú–æ–Ω—Ç—ä–Ω (Monotone Chain) –µ –≤–∞—Ä–∏–∞—Ü–∏—è –Ω–∞ Sweep Line.
1.  –°–æ—Ä—Ç–∏—Ä–∞–º–µ —Ç–æ—á–∫–∏—Ç–µ –ø–æ $x$.
2.  –ò–∑–≥—Ä–∞–∂–¥–∞–º–µ –≥–æ—Ä–Ω–∞—Ç–∞ –≤–µ—Ä–∏–≥–∞ (Upper Hull), –¥–≤–∏–∂–µ–π–∫–∏ —Å–µ –æ—Ç–ª—è–≤–æ –Ω–∞–¥—è—Å–Ω–æ.
3.  –ò–∑–≥—Ä–∞–∂–¥–∞–º–µ –¥–æ–ª–Ω–∞—Ç–∞ –≤–µ—Ä–∏–≥–∞ (Lower Hull), –¥–≤–∏–∂–µ–π–∫–∏ —Å–µ –æ—Ç–¥—è—Å–Ω–æ –Ω–∞–ª—è–≤–æ.
4.  –ò–∑–ø–æ–ª–∑–≤–∞–º–µ Cross Product, –∑–∞ –¥–∞ –ø—Ä–µ–º–∞—Ö–≤–∞–º–µ —Ç–æ—á–∫–∏, –∫–æ–∏—Ç–æ –ø—Ä–∞–≤—è—Ç "–¥–µ—Å–µ–Ω –∑–∞–≤–æ–π".

---

## 5. –ü—Ä–µ—Å–∏—á–∞–Ω–µ –Ω–∞ –æ—Ç—Å–µ—á–∫–∏ (Bentley-Ottmann)

–ù–∞–º–∏—Ä–∞ –≤—Å–∏—á–∫–∏ $K$ –ø—Ä–µ—Å–µ—á–Ω–∏ —Ç–æ—á–∫–∏ –Ω–∞ $N$ –æ—Ç—Å–µ—á–∫–∏.
–°–ª–æ–∂–Ω–æ—Å—Ç: $O((N+K) \log N)$.
*   –°—Ç–∞—Ç—É—Å—ä—Ç –ø–∞–∑–∏ –æ—Ç—Å–µ—á–∫–∏—Ç–µ, –ø—Ä–µ—Å–∏—á–∞—â–∏ –ø—Ä–∞–≤–∞—Ç–∞, —Å–æ—Ä—Ç–∏—Ä–∞–Ω–∏ –ø–æ —Ç–µ–∫—É—â–∞—Ç–∞ –∏–º $y$-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞.
*   –ü—Ä–µ—Å–µ—á–Ω–∏ —Ç–æ—á–∫–∏ –º–æ–≥–∞—Ç –¥–∞ –≤—ä–∑–Ω–∏–∫–Ω–∞—Ç —Å–∞–º–æ –º–µ–∂–¥—É —Å—ä—Å–µ–¥–Ω–∏ –æ—Ç—Å–µ—á–∫–∏ –≤ —Å—Ç–∞—Ç—É—Å–∞.

---

## 6. –ó–∞–¥–∞—á–∏ –∑–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
1.  **SPOJ CLOPPAIR**: Closest Pair.
2.  **USACO Window Area**: Union of rectangles.
3.  **Codeforces 1027D**: Mouse Hunt.
4.  **CSES Convex Hull**.

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
Sweep Line –∏–∑–∏—Å–∫–≤–∞ –ø—Ä–µ—Ü–∏–∑–Ω–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∞–≤–∏–ª–µ–Ω –∏–∑–±–æ—Ä –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞ "—Å—Ç–∞—Ç—É—Å–∞". –í–∏–Ω–∞–≥–∏ –º–∏—Å–ª–µ—Ç–µ –∫–∞–∫–≤–æ —Å–µ –ø—Ä–æ–º–µ–Ω—è, –∫–æ–≥–∞—Ç–æ –ø—Ä–∞–≤–∞—Ç–∞ –ø—Ä–µ–º–∏–Ω–µ –ø—Ä–µ–∑ –¥–∞–¥–µ–Ω–∞ —Ç–æ—á–∫–∞.
